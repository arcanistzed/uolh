---
import { changeLanguage, setDefaultNamespace, t } from "i18next";
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

changeLanguage("en");

setDefaultNamespace("blog");
export async function getStaticPaths() {
    const blogPosts = await getCollection("blog");
    return blogPosts.map((post) => ({
        params: { slug: post.slug },
        props: { post },
    }));
}
const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={`${post.data.title} | uOttawa Legal Hackers`} description={post.data.description}>
	<main class="mx-auto flex h-full w-full max-w-2xl flex-col gap-8 p-4">
		<article>
			<header class="mb-8">
				<h1 class="text-4xl font-bold leading-relaxed text-tertiary">{post.data.title}</h1>
				<p class="mt-2 text-gray-600">
					{post.data.pubDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
					{post.data.author && ` • ${post.data.author}`}
				</p>
				{post.data.tags && post.data.tags.length > 0 && (
					<div class="mt-3 flex flex-wrap gap-2">
						{post.data.tags.map((tag) => (
							<span class="rounded bg-secondary/10 px-2 py-1 text-xs text-secondary">
								{tag}
							</span>
						))}
					</div>
				)}
			</header>
			<div class="prose prose-lg max-w-none leading-relaxed">
				<Content />
			</div>
		</article>
		<div class="mt-8 border-t pt-6">
			<a href="/blog" class="text-primary hover:text-secondary transition-colors">
				← {t("back-to-blog")}
			</a>
		</div>
	</main>
</Layout>
